class o{constructor(t,e,r){this.view=t,this.model=e,this.storyId=r}render(){return this.view.render({id:this.storyId,name:"Loading story...",description:"Please wait while we load the story details...",photoUrl:"",createdAt:new Date().toISOString(),lat:null,lon:null})}async init(){try{const t=await this.model.getStoryById(this.storyId);if(!t)throw new Error("Story not found");if(this.view.renderStory(t),t.lat&&t.lon){await this.view.initMap(t.lat,t.lon),await this.view.addMarker(t.lat,t.lon,t.name);try{const e=await this.view.getAddress(t.lat,t.lon);this.view.updateAddress(e)}catch{this.view.updateAddress(`Location: ${t.lat.toFixed(4)}, ${t.lon.toFixed(4)}`)}}}catch(t){this.view.showError(t.message||"An error occurred while loading the story.")}}}export{o as StoryDetailPresenter};
