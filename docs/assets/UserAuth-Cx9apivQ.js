import{a as i,A as c,U as p}from"./index-CKSsnL6G.js";class l{constructor(){this.api=i.create({baseURL:c})}async register({name:e,email:r,password:t}){var a,s;try{return(await this.api.post("/register",{name:e,email:r,password:t})).data}catch(o){throw new Error(((s=(a=o.response)==null?void 0:a.data)==null?void 0:s.message)||"Registration failed")}}async login({email:e,password:r}){var t,a;try{const s=await this.api.post("/login",{email:e,password:r}),{token:o,name:n}=s.data.loginResult;return this.saveSession(o,n),s.data}catch(s){throw new Error(((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Login failed")}}saveSession(e,r){p.login(e,r)}}export{l as UserAuth};
