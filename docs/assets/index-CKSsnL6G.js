const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./StoryView-DmSkCwTH.js","./MapView-BIYUnBjD.js","./MapService-wUwhiCd_.js","./MapService-CuCRB34y.css","./StoryDetailView-EIgCoTu9.js","./AddStoryView-DA8UNSQF.js","./FavoriteStoriesView-47aNNSOt.js","./AuthView-DMCRc2Zj.js","./NotificationService-CC43zISv.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();class oe extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.render(),this.hashChangeHandler=null}connectedCallback(){this.setupEventListeners(),console.log("Skip to content component connected")}isHomeUrl(){const t=window.location.hash;return t===""||t==="#"||t==="#/"||t.startsWith("#/?")}setupEventListeners(){this.shadowRoot.querySelector(".skip-link").addEventListener("click",r=>{if(r.preventDefault(),!this.isHomeUrl())console.log("Not on home page, navigating to home first"),this.hashChangeHandler&&window.removeEventListener("hashchange",this.hashChangeHandler),this.hashChangeHandler=()=>{setTimeout(()=>{const n=document.querySelector("#stories");n?(n.setAttribute("tabindex","-1"),n.focus(),n.scrollIntoView({behavior:"smooth",block:"start"}),console.log("Navigated to home and focusing on stories section")):console.error("Stories section element not found after navigation"),window.removeEventListener("hashchange",this.hashChangeHandler),this.hashChangeHandler=null},500)},window.addEventListener("hashchange",this.hashChangeHandler),window.location.hash="/";else{const n=document.querySelector("#stories");n?(n.setAttribute("tabindex","-1"),n.focus(),n.scrollIntoView({behavior:"smooth",block:"start"}),console.log("Already on home page, focusing on stories section")):console.error("Stories section element not found")}})}disconnectedCallback(){this.hashChangeHandler&&(window.removeEventListener("hashchange",this.hashChangeHandler),this.hashChangeHandler=null)}render(){this.shadowRoot.innerHTML=`
      <style>
        .skip-link {
          position: fixed;
          top: 10px; /* Ubah dari -100px menjadi 10px agar selalu terlihat */
          left: 10px;
          background: #4361ee;
          color: white;
          padding: 12px 16px;
          border-radius: 4px;
          font-weight: bold;
          text-decoration: none;
          z-index: 9999;
          transition: top 0.3s ease;
          display: flex;
          align-items: center;
          gap: 8px;
          box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* Tambahkan bayangan agar lebih menonjol */
        }
        
        .skip-link:focus, .skip-link:hover {
          outline: 3px solid #4895ef;
          transform: scale(1.05); /* Sedikit efek membesar saat hover/focus */
        }
        
        .skip-link i {
          font-size: 14px;
        }
      </style>
      
      <a href="#stories" class="skip-link" aria-label="Skip to stories content">
        <i class="fas fa-arrow-right"></i> 
        Langsung ke Konten Stories
      </a>
    `}}customElements.get("skip-to-content")||(customElements.define("skip-to-content",oe),console.log("Skip to content component defined"));const se="https://story-api.dicoding.dev/v1",ie="BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk";class O{static getToken(){return localStorage.getItem("authToken")}static getUserName(){return localStorage.getItem("userName")}static isAuthenticated(){return!!this.getToken()}static login(t,r){localStorage.setItem("authToken",t),localStorage.setItem("userName",r)}static logout(){localStorage.removeItem("authToken"),localStorage.removeItem("userName")}}const ae=Object.freeze(Object.defineProperty({__proto__:null,UserSession:O},Symbol.toStringTag,{value:"Module"}));function Lt(e,t){return function(){return e.apply(t,arguments)}}const{toString:ce}=Object.prototype,{getPrototypeOf:ht}=Object,{iterator:G,toStringTag:Dt}=Symbol,Y=(e=>t=>{const r=ce.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),_=e=>(e=e.toLowerCase(),t=>Y(t)===e),Q=e=>t=>typeof t===e,{isArray:B}=Array,H=Q("undefined");function le(e){return e!==null&&!H(e)&&e.constructor!==null&&!H(e.constructor)&&x(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Ct=_("ArrayBuffer");function ue(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ct(e.buffer),t}const de=Q("string"),x=Q("function"),Ft=Q("number"),Z=e=>e!==null&&typeof e=="object",fe=e=>e===!0||e===!1,V=e=>{if(Y(e)!=="object")return!1;const t=ht(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Dt in e)&&!(G in e)},he=_("Date"),pe=_("File"),me=_("Blob"),ye=_("FileList"),we=e=>Z(e)&&x(e.pipe),ge=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||x(e.append)&&((t=Y(e))==="formdata"||t==="object"&&x(e.toString)&&e.toString()==="[object FormData]"))},be=_("URLSearchParams"),[Se,Ee,ve,ke]=["ReadableStream","Request","Response","Headers"].map(_),Ae=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function M(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,o;if(typeof e!="object"&&(e=[e]),B(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const s=r?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let a;for(n=0;n<i;n++)a=s[n],t.call(null,e[a],a,e)}}function Ut(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,o;for(;n-- >0;)if(o=r[n],t===o.toLowerCase())return o;return null}const C=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Bt=e=>!H(e)&&e!==C;function it(){const{caseless:e}=Bt(this)&&this||{},t={},r=(n,o)=>{const s=e&&Ut(t,o)||o;V(t[s])&&V(n)?t[s]=it(t[s],n):V(n)?t[s]=it({},n):B(n)?t[s]=n.slice():t[s]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&M(arguments[n],r);return t}const Re=(e,t,r,{allOwnKeys:n}={})=>(M(t,(o,s)=>{r&&x(o)?e[s]=Lt(o,r):e[s]=o},{allOwnKeys:n}),e),xe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Te=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Oe=(e,t,r,n)=>{let o,s,i;const a={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),s=o.length;s-- >0;)i=o[s],(!n||n(i,e,t))&&!a[i]&&(t[i]=e[i],a[i]=!0);e=r!==!1&&ht(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},_e=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},Pe=e=>{if(!e)return null;if(B(e))return e;let t=e.length;if(!Ft(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Ne=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ht(Uint8Array)),Le=(e,t)=>{const n=(e&&e[G]).call(e);let o;for(;(o=n.next())&&!o.done;){const s=o.value;t.call(e,s[0],s[1])}},De=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Ce=_("HTMLFormElement"),Fe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,o){return n.toUpperCase()+o}),gt=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Ue=_("RegExp"),It=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};M(r,(o,s)=>{let i;(i=t(o,s,e))!==!1&&(n[s]=i||o)}),Object.defineProperties(e,n)},Be=e=>{It(e,(t,r)=>{if(x(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(x(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Ie=(e,t)=>{const r={},n=o=>{o.forEach(s=>{r[s]=!0})};return B(e)?n(e):n(String(e).split(t)),r},qe=()=>{},He=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Me(e){return!!(e&&x(e.append)&&e[Dt]==="FormData"&&e[G])}const je=e=>{const t=new Array(10),r=(n,o)=>{if(Z(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[o]=n;const s=B(n)?[]:{};return M(n,(i,a)=>{const d=r(i,o+1);!H(d)&&(s[a]=d)}),t[o]=void 0,s}}return n};return r(e,0)},$e=_("AsyncFunction"),Ve=e=>e&&(Z(e)||x(e))&&x(e.then)&&x(e.catch),qt=((e,t)=>e?setImmediate:t?((r,n)=>(C.addEventListener("message",({source:o,data:s})=>{o===C&&s===r&&n.length&&n.shift()()},!1),o=>{n.push(o),C.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",x(C.postMessage)),ze=typeof queueMicrotask<"u"?queueMicrotask.bind(C):typeof process<"u"&&process.nextTick||qt,We=e=>e!=null&&x(e[G]),c={isArray:B,isArrayBuffer:Ct,isBuffer:le,isFormData:ge,isArrayBufferView:ue,isString:de,isNumber:Ft,isBoolean:fe,isObject:Z,isPlainObject:V,isReadableStream:Se,isRequest:Ee,isResponse:ve,isHeaders:ke,isUndefined:H,isDate:he,isFile:pe,isBlob:me,isRegExp:Ue,isFunction:x,isStream:we,isURLSearchParams:be,isTypedArray:Ne,isFileList:ye,forEach:M,merge:it,extend:Re,trim:Ae,stripBOM:xe,inherits:Te,toFlatObject:Oe,kindOf:Y,kindOfTest:_,endsWith:_e,toArray:Pe,forEachEntry:Le,matchAll:De,isHTMLForm:Ce,hasOwnProperty:gt,hasOwnProp:gt,reduceDescriptors:It,freezeMethods:Be,toObjectSet:Ie,toCamelCase:Fe,noop:qe,toFiniteNumber:He,findKey:Ut,global:C,isContextDefined:Bt,isSpecCompliantForm:Me,toJSONObject:je,isAsyncFn:$e,isThenable:Ve,setImmediate:qt,asap:ze,isIterable:We};function y(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}c.inherits(y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:c.toJSONObject(this.config),code:this.code,status:this.status}}});const Ht=y.prototype,Mt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Mt[e]={value:e}});Object.defineProperties(y,Mt);Object.defineProperty(Ht,"isAxiosError",{value:!0});y.from=(e,t,r,n,o,s)=>{const i=Object.create(Ht);return c.toFlatObject(e,i,function(d){return d!==Error.prototype},a=>a!=="isAxiosError"),y.call(i,e.message,t,r,n,o),i.cause=e,i.name=e.name,s&&Object.assign(i,s),i};const Je=null;function at(e){return c.isPlainObject(e)||c.isArray(e)}function jt(e){return c.endsWith(e,"[]")?e.slice(0,-2):e}function bt(e,t,r){return e?e.concat(t).map(function(o,s){return o=jt(o),!r&&s?"["+o+"]":o}).join(r?".":""):t}function Ke(e){return c.isArray(e)&&!e.some(at)}const Xe=c.toFlatObject(c,{},null,function(t){return/^is[A-Z]/.test(t)});function tt(e,t,r){if(!c.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=c.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,p){return!c.isUndefined(p[m])});const n=r.metaTokens,o=r.visitor||l,s=r.dots,i=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&c.isSpecCompliantForm(t);if(!c.isFunction(o))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(c.isDate(h))return h.toISOString();if(!d&&c.isBlob(h))throw new y("Blob is not supported. Use a Buffer instead.");return c.isArrayBuffer(h)||c.isTypedArray(h)?d&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function l(h,m,p){let g=h;if(h&&!p&&typeof h=="object"){if(c.endsWith(m,"{}"))m=n?m:m.slice(0,-2),h=JSON.stringify(h);else if(c.isArray(h)&&Ke(h)||(c.isFileList(h)||c.endsWith(m,"[]"))&&(g=c.toArray(h)))return m=jt(m),g.forEach(function(k,N){!(c.isUndefined(k)||k===null)&&t.append(i===!0?bt([m],N,s):i===null?m:m+"[]",u(k))}),!1}return at(h)?!0:(t.append(bt(p,m,s),u(h)),!1)}const f=[],w=Object.assign(Xe,{defaultVisitor:l,convertValue:u,isVisitable:at});function S(h,m){if(!c.isUndefined(h)){if(f.indexOf(h)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(h),c.forEach(h,function(g,E){(!(c.isUndefined(g)||g===null)&&o.call(t,g,c.isString(E)?E.trim():E,m,w))===!0&&S(g,m?m.concat(E):[E])}),f.pop()}}if(!c.isObject(e))throw new TypeError("data must be an object");return S(e),t}function St(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function pt(e,t){this._pairs=[],e&&tt(e,this,t)}const $t=pt.prototype;$t.append=function(t,r){this._pairs.push([t,r])};$t.toString=function(t){const r=t?function(n){return t.call(this,n,St)}:St;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function Ge(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Vt(e,t,r){if(!t)return e;const n=r&&r.encode||Ge;c.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let s;if(o?s=o(t,r):s=c.isURLSearchParams(t)?t.toString():new pt(t,r).toString(n),s){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Et{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){c.forEach(this.handlers,function(n){n!==null&&t(n)})}}const zt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ye=typeof URLSearchParams<"u"?URLSearchParams:pt,Qe=typeof FormData<"u"?FormData:null,Ze=typeof Blob<"u"?Blob:null,tr={isBrowser:!0,classes:{URLSearchParams:Ye,FormData:Qe,Blob:Ze},protocols:["http","https","file","blob","url","data"]},mt=typeof window<"u"&&typeof document<"u",ct=typeof navigator=="object"&&navigator||void 0,er=mt&&(!ct||["ReactNative","NativeScript","NS"].indexOf(ct.product)<0),rr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",nr=mt&&window.location.href||"http://localhost",or=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mt,hasStandardBrowserEnv:er,hasStandardBrowserWebWorkerEnv:rr,navigator:ct,origin:nr},Symbol.toStringTag,{value:"Module"})),A={...or,...tr};function sr(e,t){return tt(e,new A.classes.URLSearchParams,Object.assign({visitor:function(r,n,o,s){return A.isNode&&c.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function ir(e){return c.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ar(e){const t={},r=Object.keys(e);let n;const o=r.length;let s;for(n=0;n<o;n++)s=r[n],t[s]=e[s];return t}function Wt(e){function t(r,n,o,s){let i=r[s++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),d=s>=r.length;return i=!i&&c.isArray(o)?o.length:i,d?(c.hasOwnProp(o,i)?o[i]=[o[i],n]:o[i]=n,!a):((!o[i]||!c.isObject(o[i]))&&(o[i]=[]),t(r,n,o[i],s)&&c.isArray(o[i])&&(o[i]=ar(o[i])),!a)}if(c.isFormData(e)&&c.isFunction(e.entries)){const r={};return c.forEachEntry(e,(n,o)=>{t(ir(n),o,r,0)}),r}return null}function cr(e,t,r){if(c.isString(e))try{return(t||JSON.parse)(e),c.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const j={transitional:zt,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",o=n.indexOf("application/json")>-1,s=c.isObject(t);if(s&&c.isHTMLForm(t)&&(t=new FormData(t)),c.isFormData(t))return o?JSON.stringify(Wt(t)):t;if(c.isArrayBuffer(t)||c.isBuffer(t)||c.isStream(t)||c.isFile(t)||c.isBlob(t)||c.isReadableStream(t))return t;if(c.isArrayBufferView(t))return t.buffer;if(c.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return sr(t,this.formSerializer).toString();if((a=c.isFileList(t))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return tt(a?{"files[]":t}:t,d&&new d,this.formSerializer)}}return s||o?(r.setContentType("application/json",!1),cr(t)):t}],transformResponse:[function(t){const r=this.transitional||j.transitional,n=r&&r.forcedJSONParsing,o=this.responseType==="json";if(c.isResponse(t)||c.isReadableStream(t))return t;if(t&&c.isString(t)&&(n&&!this.responseType||o)){const i=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?y.from(a,y.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:A.classes.FormData,Blob:A.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};c.forEach(["delete","get","head","post","put","patch"],e=>{j.headers[e]={}});const lr=c.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ur=e=>{const t={};let r,n,o;return e&&e.split(`
`).forEach(function(i){o=i.indexOf(":"),r=i.substring(0,o).trim().toLowerCase(),n=i.substring(o+1).trim(),!(!r||t[r]&&lr[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},vt=Symbol("internals");function q(e){return e&&String(e).trim().toLowerCase()}function z(e){return e===!1||e==null?e:c.isArray(e)?e.map(z):String(e)}function dr(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const fr=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function nt(e,t,r,n,o){if(c.isFunction(n))return n.call(this,t,r);if(o&&(t=r),!!c.isString(t)){if(c.isString(n))return t.indexOf(n)!==-1;if(c.isRegExp(n))return n.test(t)}}function hr(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function pr(e,t){const r=c.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(o,s,i){return this[n].call(this,t,o,s,i)},configurable:!0})})}let T=class{constructor(t){t&&this.set(t)}set(t,r,n){const o=this;function s(a,d,u){const l=q(d);if(!l)throw new Error("header name must be a non-empty string");const f=c.findKey(o,l);(!f||o[f]===void 0||u===!0||u===void 0&&o[f]!==!1)&&(o[f||d]=z(a))}const i=(a,d)=>c.forEach(a,(u,l)=>s(u,l,d));if(c.isPlainObject(t)||t instanceof this.constructor)i(t,r);else if(c.isString(t)&&(t=t.trim())&&!fr(t))i(ur(t),r);else if(c.isObject(t)&&c.isIterable(t)){let a={},d,u;for(const l of t){if(!c.isArray(l))throw TypeError("Object iterator must return a key-value pair");a[u=l[0]]=(d=a[u])?c.isArray(d)?[...d,l[1]]:[d,l[1]]:l[1]}i(a,r)}else t!=null&&s(r,t,n);return this}get(t,r){if(t=q(t),t){const n=c.findKey(this,t);if(n){const o=this[n];if(!r)return o;if(r===!0)return dr(o);if(c.isFunction(r))return r.call(this,o,n);if(c.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=q(t),t){const n=c.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||nt(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let o=!1;function s(i){if(i=q(i),i){const a=c.findKey(n,i);a&&(!r||nt(n,n[a],a,r))&&(delete n[a],o=!0)}}return c.isArray(t)?t.forEach(s):s(t),o}clear(t){const r=Object.keys(this);let n=r.length,o=!1;for(;n--;){const s=r[n];(!t||nt(this,this[s],s,t,!0))&&(delete this[s],o=!0)}return o}normalize(t){const r=this,n={};return c.forEach(this,(o,s)=>{const i=c.findKey(n,s);if(i){r[i]=z(o),delete r[s];return}const a=t?hr(s):String(s).trim();a!==s&&delete r[s],r[a]=z(o),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return c.forEach(this,(n,o)=>{n!=null&&n!==!1&&(r[o]=t&&c.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(o=>n.set(o)),n}static accessor(t){const n=(this[vt]=this[vt]={accessors:{}}).accessors,o=this.prototype;function s(i){const a=q(i);n[a]||(pr(o,i),n[a]=!0)}return c.isArray(t)?t.forEach(s):s(t),this}};T.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);c.reduceDescriptors(T.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});c.freezeMethods(T);function ot(e,t){const r=this||j,n=t||r,o=T.from(n.headers);let s=n.data;return c.forEach(e,function(a){s=a.call(r,s,o.normalize(),t?t.status:void 0)}),o.normalize(),s}function Jt(e){return!!(e&&e.__CANCEL__)}function I(e,t,r){y.call(this,e??"canceled",y.ERR_CANCELED,t,r),this.name="CanceledError"}c.inherits(I,y,{__CANCEL__:!0});function Kt(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new y("Request failed with status code "+r.status,[y.ERR_BAD_REQUEST,y.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function mr(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function yr(e,t){e=e||10;const r=new Array(e),n=new Array(e);let o=0,s=0,i;return t=t!==void 0?t:1e3,function(d){const u=Date.now(),l=n[s];i||(i=u),r[o]=d,n[o]=u;let f=s,w=0;for(;f!==o;)w+=r[f++],f=f%e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),u-i<t)return;const S=l&&u-l;return S?Math.round(w*1e3/S):void 0}}function wr(e,t){let r=0,n=1e3/t,o,s;const i=(u,l=Date.now())=>{r=l,o=null,s&&(clearTimeout(s),s=null),e.apply(null,u)};return[(...u)=>{const l=Date.now(),f=l-r;f>=n?i(u,l):(o=u,s||(s=setTimeout(()=>{s=null,i(o)},n-f)))},()=>o&&i(o)]}const J=(e,t,r=3)=>{let n=0;const o=yr(50,250);return wr(s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,d=i-n,u=o(d),l=i<=a;n=i;const f={loaded:i,total:a,progress:a?i/a:void 0,bytes:d,rate:u||void 0,estimated:u&&a&&l?(a-i)/u:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},r)},kt=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},At=e=>(...t)=>c.asap(()=>e(...t)),gr=A.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,A.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(A.origin),A.navigator&&/(msie|trident)/i.test(A.navigator.userAgent)):()=>!0,br=A.hasStandardBrowserEnv?{write(e,t,r,n,o,s){const i=[e+"="+encodeURIComponent(t)];c.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),c.isString(n)&&i.push("path="+n),c.isString(o)&&i.push("domain="+o),s===!0&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Sr(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Er(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Xt(e,t,r){let n=!Sr(t);return e&&(n||r==!1)?Er(e,t):t}const Rt=e=>e instanceof T?{...e}:e;function U(e,t){t=t||{};const r={};function n(u,l,f,w){return c.isPlainObject(u)&&c.isPlainObject(l)?c.merge.call({caseless:w},u,l):c.isPlainObject(l)?c.merge({},l):c.isArray(l)?l.slice():l}function o(u,l,f,w){if(c.isUndefined(l)){if(!c.isUndefined(u))return n(void 0,u,f,w)}else return n(u,l,f,w)}function s(u,l){if(!c.isUndefined(l))return n(void 0,l)}function i(u,l){if(c.isUndefined(l)){if(!c.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function a(u,l,f){if(f in t)return n(u,l);if(f in e)return n(void 0,u)}const d={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(u,l,f)=>o(Rt(u),Rt(l),f,!0)};return c.forEach(Object.keys(Object.assign({},e,t)),function(l){const f=d[l]||o,w=f(e[l],t[l],l);c.isUndefined(w)&&f!==a||(r[l]=w)}),r}const Gt=e=>{const t=U({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:s,headers:i,auth:a}=t;t.headers=i=T.from(i),t.url=Vt(Xt(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let d;if(c.isFormData(r)){if(A.hasStandardBrowserEnv||A.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((d=i.getContentType())!==!1){const[u,...l]=d?d.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...l].join("; "))}}if(A.hasStandardBrowserEnv&&(n&&c.isFunction(n)&&(n=n(t)),n||n!==!1&&gr(t.url))){const u=o&&s&&br.read(s);u&&i.set(o,u)}return t},vr=typeof XMLHttpRequest<"u",kr=vr&&function(e){return new Promise(function(r,n){const o=Gt(e);let s=o.data;const i=T.from(o.headers).normalize();let{responseType:a,onUploadProgress:d,onDownloadProgress:u}=o,l,f,w,S,h;function m(){S&&S(),h&&h(),o.cancelToken&&o.cancelToken.unsubscribe(l),o.signal&&o.signal.removeEventListener("abort",l)}let p=new XMLHttpRequest;p.open(o.method.toUpperCase(),o.url,!0),p.timeout=o.timeout;function g(){if(!p)return;const k=T.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:k,config:e,request:p};Kt(function(D){r(D),m()},function(D){n(D),m()},R),p=null}"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(g)},p.onabort=function(){p&&(n(new y("Request aborted",y.ECONNABORTED,e,p)),p=null)},p.onerror=function(){n(new y("Network Error",y.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let N=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const R=o.transitional||zt;o.timeoutErrorMessage&&(N=o.timeoutErrorMessage),n(new y(N,R.clarifyTimeoutError?y.ETIMEDOUT:y.ECONNABORTED,e,p)),p=null},s===void 0&&i.setContentType(null),"setRequestHeader"in p&&c.forEach(i.toJSON(),function(N,R){p.setRequestHeader(R,N)}),c.isUndefined(o.withCredentials)||(p.withCredentials=!!o.withCredentials),a&&a!=="json"&&(p.responseType=o.responseType),u&&([w,h]=J(u,!0),p.addEventListener("progress",w)),d&&p.upload&&([f,S]=J(d),p.upload.addEventListener("progress",f),p.upload.addEventListener("loadend",S)),(o.cancelToken||o.signal)&&(l=k=>{p&&(n(!k||k.type?new I(null,e,p):k),p.abort(),p=null)},o.cancelToken&&o.cancelToken.subscribe(l),o.signal&&(o.signal.aborted?l():o.signal.addEventListener("abort",l)));const E=mr(o.url);if(E&&A.protocols.indexOf(E)===-1){n(new y("Unsupported protocol "+E+":",y.ERR_BAD_REQUEST,e));return}p.send(s||null)})},Ar=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,o;const s=function(u){if(!o){o=!0,a();const l=u instanceof Error?u:this.reason;n.abort(l instanceof y?l:new I(l instanceof Error?l.message:l))}};let i=t&&setTimeout(()=>{i=null,s(new y(`timeout ${t} of ms exceeded`,y.ETIMEDOUT))},t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),e=null)};e.forEach(u=>u.addEventListener("abort",s));const{signal:d}=n;return d.unsubscribe=()=>c.asap(a),d}},Rr=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,o;for(;n<r;)o=n+t,yield e.slice(n,o),n=o},xr=async function*(e,t){for await(const r of Tr(e))yield*Rr(r,t)},Tr=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},xt=(e,t,r,n)=>{const o=xr(e,t);let s=0,i,a=d=>{i||(i=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:u,value:l}=await o.next();if(u){a(),d.close();return}let f=l.byteLength;if(r){let w=s+=f;r(w)}d.enqueue(new Uint8Array(l))}catch(u){throw a(u),u}},cancel(d){return a(d),o.return()}},{highWaterMark:2})},et=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Yt=et&&typeof ReadableStream=="function",Or=et&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Qt=(e,...t)=>{try{return!!e(...t)}catch{return!1}},_r=Yt&&Qt(()=>{let e=!1;const t=new Request(A.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Tt=64*1024,lt=Yt&&Qt(()=>c.isReadableStream(new Response("").body)),K={stream:lt&&(e=>e.body)};et&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!K[t]&&(K[t]=c.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new y(`Response type '${t}' is not supported`,y.ERR_NOT_SUPPORT,n)})})})(new Response);const Pr=async e=>{if(e==null)return 0;if(c.isBlob(e))return e.size;if(c.isSpecCompliantForm(e))return(await new Request(A.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(c.isArrayBufferView(e)||c.isArrayBuffer(e))return e.byteLength;if(c.isURLSearchParams(e)&&(e=e+""),c.isString(e))return(await Or(e)).byteLength},Nr=async(e,t)=>{const r=c.toFiniteNumber(e.getContentLength());return r??Pr(t)},Lr=et&&(async e=>{let{url:t,method:r,data:n,signal:o,cancelToken:s,timeout:i,onDownloadProgress:a,onUploadProgress:d,responseType:u,headers:l,withCredentials:f="same-origin",fetchOptions:w}=Gt(e);u=u?(u+"").toLowerCase():"text";let S=Ar([o,s&&s.toAbortSignal()],i),h;const m=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let p;try{if(d&&_r&&r!=="get"&&r!=="head"&&(p=await Nr(l,n))!==0){let R=new Request(t,{method:"POST",body:n,duplex:"half"}),L;if(c.isFormData(n)&&(L=R.headers.get("content-type"))&&l.setContentType(L),R.body){const[D,$]=kt(p,J(At(d)));n=xt(R.body,Tt,D,$)}}c.isString(f)||(f=f?"include":"omit");const g="credentials"in Request.prototype;h=new Request(t,{...w,signal:S,method:r.toUpperCase(),headers:l.normalize().toJSON(),body:n,duplex:"half",credentials:g?f:void 0});let E=await fetch(h);const k=lt&&(u==="stream"||u==="response");if(lt&&(a||k&&m)){const R={};["status","statusText","headers"].forEach(wt=>{R[wt]=E[wt]});const L=c.toFiniteNumber(E.headers.get("content-length")),[D,$]=a&&kt(L,J(At(a),!0))||[];E=new Response(xt(E.body,Tt,D,()=>{$&&$(),m&&m()}),R)}u=u||"text";let N=await K[c.findKey(K,u)||"text"](E,e);return!k&&m&&m(),await new Promise((R,L)=>{Kt(R,L,{data:N,headers:T.from(E.headers),status:E.status,statusText:E.statusText,config:e,request:h})})}catch(g){throw m&&m(),g&&g.name==="TypeError"&&/Load failed|fetch/i.test(g.message)?Object.assign(new y("Network Error",y.ERR_NETWORK,e,h),{cause:g.cause||g}):y.from(g,g&&g.code,e,h)}}),ut={http:Je,xhr:kr,fetch:Lr};c.forEach(ut,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ot=e=>`- ${e}`,Dr=e=>c.isFunction(e)||e===null||e===!1,Zt={getAdapter:e=>{e=c.isArray(e)?e:[e];const{length:t}=e;let r,n;const o={};for(let s=0;s<t;s++){r=e[s];let i;if(n=r,!Dr(r)&&(n=ut[(i=String(r)).toLowerCase()],n===void 0))throw new y(`Unknown adapter '${i}'`);if(n)break;o[i||"#"+s]=n}if(!n){const s=Object.entries(o).map(([a,d])=>`adapter ${a} `+(d===!1?"is not supported by the environment":"is not available in the build"));let i=t?s.length>1?`since :
`+s.map(Ot).join(`
`):" "+Ot(s[0]):"as no adapter specified";throw new y("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:ut};function st(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new I(null,e)}function _t(e){return st(e),e.headers=T.from(e.headers),e.data=ot.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Zt.getAdapter(e.adapter||j.adapter)(e).then(function(n){return st(e),n.data=ot.call(e,e.transformResponse,n),n.headers=T.from(n.headers),n},function(n){return Jt(n)||(st(e),n&&n.response&&(n.response.data=ot.call(e,e.transformResponse,n.response),n.response.headers=T.from(n.response.headers))),Promise.reject(n)})}const te="1.9.0",rt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{rt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Pt={};rt.transitional=function(t,r,n){function o(s,i){return"[Axios v"+te+"] Transitional option '"+s+"'"+i+(n?". "+n:"")}return(s,i,a)=>{if(t===!1)throw new y(o(i," has been removed"+(r?" in "+r:"")),y.ERR_DEPRECATED);return r&&!Pt[i]&&(Pt[i]=!0,console.warn(o(i," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,i,a):!0}};rt.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Cr(e,t,r){if(typeof e!="object")throw new y("options must be an object",y.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const s=n[o],i=t[s];if(i){const a=e[s],d=a===void 0||i(a,s,e);if(d!==!0)throw new y("option "+s+" must be "+d,y.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new y("Unknown option "+s,y.ERR_BAD_OPTION)}}const W={assertOptions:Cr,validators:rt},P=W.validators;let F=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Et,response:new Et}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const s=o.stack?o.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=U(this.defaults,r);const{transitional:n,paramsSerializer:o,headers:s}=r;n!==void 0&&W.assertOptions(n,{silentJSONParsing:P.transitional(P.boolean),forcedJSONParsing:P.transitional(P.boolean),clarifyTimeoutError:P.transitional(P.boolean)},!1),o!=null&&(c.isFunction(o)?r.paramsSerializer={serialize:o}:W.assertOptions(o,{encode:P.function,serialize:P.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),W.assertOptions(r,{baseUrl:P.spelling("baseURL"),withXsrfToken:P.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=s&&c.merge(s.common,s[r.method]);s&&c.forEach(["delete","get","head","post","put","patch","common"],h=>{delete s[h]}),r.headers=T.concat(i,s);const a=[];let d=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(d=d&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let l,f=0,w;if(!d){const h=[_t.bind(this),void 0];for(h.unshift.apply(h,a),h.push.apply(h,u),w=h.length,l=Promise.resolve(r);f<w;)l=l.then(h[f++],h[f++]);return l}w=a.length;let S=r;for(f=0;f<w;){const h=a[f++],m=a[f++];try{S=h(S)}catch(p){m.call(this,p);break}}try{l=_t.call(this,S)}catch(h){return Promise.reject(h)}for(f=0,w=u.length;f<w;)l=l.then(u[f++],u[f++]);return l}getUri(t){t=U(this.defaults,t);const r=Xt(t.baseURL,t.url,t.allowAbsoluteUrls);return Vt(r,t.params,t.paramsSerializer)}};c.forEach(["delete","get","head","options"],function(t){F.prototype[t]=function(r,n){return this.request(U(n||{},{method:t,url:r,data:(n||{}).data}))}});c.forEach(["post","put","patch"],function(t){function r(n){return function(s,i,a){return this.request(U(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:i}))}}F.prototype[t]=r(),F.prototype[t+"Form"]=r(!0)});let Fr=class ee{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(o=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](o);n._listeners=null}),this.promise.then=o=>{let s;const i=new Promise(a=>{n.subscribe(a),s=a}).then(o);return i.cancel=function(){n.unsubscribe(s)},i},t(function(s,i,a){n.reason||(n.reason=new I(s,i,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new ee(function(o){t=o}),cancel:t}}};function Ur(e){return function(r){return e.apply(null,r)}}function Br(e){return c.isObject(e)&&e.isAxiosError===!0}const dt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(dt).forEach(([e,t])=>{dt[t]=e});function re(e){const t=new F(e),r=Lt(F.prototype.request,t);return c.extend(r,F.prototype,t,{allOwnKeys:!0}),c.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return re(U(e,o))},r}const b=re(j);b.Axios=F;b.CanceledError=I;b.CancelToken=Fr;b.isCancel=Jt;b.VERSION=te;b.toFormData=tt;b.AxiosError=y;b.Cancel=b.CanceledError;b.all=function(t){return Promise.all(t)};b.spread=Ur;b.isAxiosError=Br;b.mergeConfig=U;b.AxiosHeaders=T;b.formToJSON=e=>Wt(c.isHTMLForm(e)?new FormData(e):e);b.getAdapter=Zt.getAdapter;b.HttpStatusCode=dt;b.default=b;const{Axios:nn,AxiosError:on,CanceledError:sn,isCancel:an,CancelToken:cn,VERSION:ln,all:un,Cancel:dn,isAxiosError:fn,spread:hn,toFormData:pn,AxiosHeaders:mn,HttpStatusCode:yn,formToJSON:wn,getAdapter:gn,mergeConfig:bn}=b;class X{static async requestPermission(){return"Notification"in window?await Notification.requestPermission():!1}static async subscribe(){if(!("serviceWorker"in navigator))return null;const t=await navigator.serviceWorker.ready;let r=await t.pushManager.getSubscription();r||(r=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(ie)}));const n=O.getToken();if(!n)return r;try{await b.post(`${se}/notifications/subscribe`,{endpoint:r.endpoint,keys:{p256dh:this.arrayBufferToBase64(r.getKey("p256dh")),auth:this.arrayBufferToBase64(r.getKey("auth"))}},{headers:{Authorization:`Bearer ${n}`}})}catch(o){console.error("Failed to register subscription:",o)}return r}static urlBase64ToUint8Array(t){const r="=".repeat((4-t.length%4)%4),n=(t+r).replace(/-/g,"+").replace(/_/g,"/"),o=window.atob(n);return Uint8Array.from([...o].map(s=>s.charCodeAt(0)))}static arrayBufferToBase64(t){return window.btoa(String.fromCharCode(...new Uint8Array(t)))}}class Ir extends HTMLElement{constructor(){super(),this.isSubscribed=!1,this.attachShadow({mode:"open"})}connectedCallback(){this.render(),this.checkSubscriptionStatus(),this.attachEventListeners()}async checkSubscriptionStatus(){try{if("serviceWorker"in navigator&&"PushManager"in window){const r=await(await navigator.serviceWorker.ready).pushManager.getSubscription();this.isSubscribed=!!r,this.updateButtonState()}else this.disableButton("Notifikasi tidak didukung di browser ini")}catch(t){console.error("Error checking notification status:",t),this.disableButton("Gagal memeriksa status notifikasi")}}updateButtonState(){const t=this.shadowRoot.querySelector("#notification-button"),r=this.shadowRoot.querySelector("#notification-status");!t||!r||(this.isSubscribed?(t.textContent="Nonaktifkan Notifikasi",t.classList.add("subscribed"),r.textContent="Notifikasi aktif"):(t.textContent="Aktifkan Notifikasi",t.classList.remove("subscribed"),r.textContent="Notifikasi tidak aktif"),t.disabled=!1)}disableButton(t){const r=this.shadowRoot.querySelector("#notification-button"),n=this.shadowRoot.querySelector("#notification-status");!r||!n||(r.disabled=!0,r.textContent="Notifikasi Tidak Tersedia",n.textContent=t)}attachEventListeners(){const t=this.shadowRoot.querySelector("#notification-button");t&&t.addEventListener("click",async()=>{this.isSubscribed?await this.unsubscribe():await this.subscribe()})}async subscribe(){try{await X.requestPermission()==="granted"?await X.subscribe()&&(this.isSubscribed=!0,this.updateButtonState(),this.showNotification("Notifikasi diaktifkan","Anda akan menerima notifikasi cerita baru")):this.showNotification("Izin ditolak","Anda tidak memberikan izin untuk notifikasi")}catch(t){console.error("Error subscribing to notifications:",t),this.showNotification("Gagal","Tidak dapat mengaktifkan notifikasi")}}async unsubscribe(){try{if("serviceWorker"in navigator){const r=await(await navigator.serviceWorker.ready).pushManager.getSubscription();r&&(await r.unsubscribe(),this.isSubscribed=!1,this.updateButtonState(),this.showNotification("Notifikasi dinonaktifkan","Anda tidak akan menerima notifikasi"))}}catch(t){console.error("Error unsubscribing from notifications:",t),this.showNotification("Gagal","Tidak dapat menonaktifkan notifikasi")}}showNotification(t,r){const n=this.shadowRoot.querySelector("#notification-message");n&&(n.innerHTML=`
      <div class="notification-title">${t}</div>
      <div class="notification-body">${r}</div>
    `,n.classList.add("show"),setTimeout(()=>{n.classList.remove("show")},3e3))}render(){this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
          margin: 10px 0;
        }
        
        .notification-container {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 10px;
        }
        
        #notification-button {
          background-color: #3498db;
          color: white;
          border: none;
          padding: 10px 15px;
          border-radius: 5px;
          cursor: pointer;
          font-size: 14px;
          transition: background-color 0.3s;
        }
        
        #notification-button:hover {
          background-color: #2980b9;
        }
        
        #notification-button.subscribed {
          background-color: #e74c3c;
        }
        
        #notification-button.subscribed:hover {
          background-color: #c0392b;
        }
        
        #notification-button:disabled {
          background-color: #95a5a6;
          cursor: not-allowed;
        }
        
        #notification-status {
          font-size: 12px;
          color: #7f8c8d;
        }
        
        #notification-message {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background-color: #2ecc71;
          color: white;
          padding: 15px;
          border-radius: 5px;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
          transform: translateY(100px);
          opacity: 0;
          transition: transform 0.3s, opacity 0.3s;
          z-index: 1000;
        }
        
        #notification-message.show {
          transform: translateY(0);
          opacity: 1;
        }
        
        .notification-title {
          font-weight: bold;
          margin-bottom: 5px;
        }
      </style>
      
      <div class="notification-container">
        <button id="notification-button" disabled>Memuat...</button>
        <div id="notification-status">Memeriksa status notifikasi...</div>
      </div>
      
      <div id="notification-message"></div>
    `}}customElements.define("notification-button",Ir);class qr{constructor(t,r){this.dbName=t,this.version=r,this.db=null}async openDB(t){return new Promise((r,n)=>{const o=indexedDB.open(this.dbName,this.version);o.onerror=s=>{n(new Error(`Database error: ${s.target.errorCode}`))},o.onsuccess=s=>{this.db=s.target.result,r(this.db)},o.onupgradeneeded=s=>{const i=s.target.result;t.stores.forEach(a=>{if(!i.objectStoreNames.contains(a.name)){const d=i.createObjectStore(a.name,{keyPath:a.keyPath});a.indexes&&a.indexes.forEach(u=>{d.createIndex(u.name,u.keyPath,{unique:u.unique})})}})}})}async saveData(t,r){return new Promise((n,o)=>{if(!this.db){o(new Error("Database not initialized"));return}const a=this.db.transaction(t,"readwrite").objectStore(t).put(r);a.onerror=d=>{o(new Error(`Error saving data: ${d.target.errorCode}`))},a.onsuccess=()=>{n(!0)}})}async getAllData(t){return new Promise((r,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const i=this.db.transaction(t,"readonly").objectStore(t).getAll();i.onerror=a=>{n(new Error(`Error getting data: ${a.target.errorCode}`))},i.onsuccess=a=>{r(a.target.result)}})}async getData(t,r){return new Promise((n,o)=>{if(!this.db){o(new Error("Database not initialized"));return}const a=this.db.transaction(t,"readonly").objectStore(t).get(r);a.onerror=d=>{o(new Error(`Error getting data: ${d.target.errorCode}`))},a.onsuccess=d=>{n(d.target.result)}})}async deleteData(t,r){return new Promise((n,o)=>{if(!this.db){o(new Error("Database not initialized"));return}const a=this.db.transaction(t,"readwrite").objectStore(t).delete(r);a.onerror=d=>{o(new Error(`Error deleting data: ${d.target.errorCode}`))},a.onsuccess=()=>{n(!0)}})}async clearStore(t){return new Promise((r,n)=>{if(!this.db){n(new Error("Database not initialized"));return}const i=this.db.transaction(t,"readwrite").objectStore(t).clear();i.onerror=a=>{n(new Error(`Error clearing store: ${a.target.errorCode}`))},i.onsuccess=()=>{r(!0)}})}}class yt{constructor(){this.dbUtil=new qr("story-app-db",1),this.initialized=!1}async init(){if(!this.initialized)try{await this.dbUtil.openDB({stores:[{name:"stories",keyPath:"id",indexes:[{name:"createdAt",keyPath:"createdAt",unique:!1}]},{name:"favorites",keyPath:"id",indexes:[{name:"createdAt",keyPath:"createdAt",unique:!1}]},{name:"offlineStories",keyPath:"tempId",indexes:[{name:"createdAt",keyPath:"createdAt",unique:!1},{name:"status",keyPath:"status",unique:!1}]}]}),this.initialized=!0,console.log("Story database initialized")}catch(t){throw console.error("Failed to initialize database:",t),t}}async saveStories(t){await this.init();try{for(const r of t)await this.dbUtil.saveData("stories",r);return!0}catch(r){throw console.error("Failed to save stories:",r),r}}async getStories(){await this.init();try{return(await this.dbUtil.getAllData("stories")).sort((r,n)=>new Date(n.createdAt)-new Date(r.createdAt))}catch(t){throw console.error("Failed to get stories:",t),t}}async getStoryById(t){await this.init();try{return await this.dbUtil.getData("stories",t)}catch(r){throw console.error(`Failed to get story with id ${t}:`,r),r}}async saveOfflineStory(t){await this.init();try{const r={...t,tempId:`temp-${Date.now()}`,createdAt:new Date().toISOString(),isOffline:!0,status:"pending"};return await this.dbUtil.saveData("offlineStories",r),"serviceWorker"in navigator&&"SyncManager"in window&&await(await navigator.serviceWorker.ready).sync.register("sync-stories"),r}catch(r){throw console.error("Failed to save offline story:",r),r}}async getOfflineStories(){await this.init();try{return(await this.dbUtil.getAllData("offlineStories")).sort((r,n)=>new Date(n.createdAt)-new Date(r.createdAt))}catch(t){throw console.error("Failed to get offline stories:",t),t}}async updateOfflineStoryStatus(t,r,n=null){await this.init();try{const o=await this.dbUtil.getData("offlineStories",t);if(!o)throw new Error(`Offline story with tempId ${t} not found`);const s={...o,status:r,id:n||o.id};return await this.dbUtil.saveData("offlineStories",s),s}catch(o){throw console.error(`Failed to update offline story status with tempId ${t}:`,o),o}}async syncOfflineStories(){if(await this.init(),!navigator.onLine)return console.log("Device is offline, cannot sync stories"),!1;try{const t=await this.getPendingOfflineStories();if(t.length===0)return console.log("No pending offline stories to sync"),!0;if(console.log(`Found ${t.length} pending offline stories to sync`),!O.getToken())return console.error("No authentication token found"),!1;for(const n of t)try{console.log(`Syncing offline story: ${n.tempId}`);const o=await this.simulateApiUpload(n);o.success?(await this.updateOfflineStoryStatus(n.tempId,"synced",o.id),o.story&&await this.dbUtil.saveData("stories",o.story)):await this.updateOfflineStoryStatus(n.tempId,"failed")}catch(o){console.error(`Failed to sync offline story ${n.tempId}:`,o),await this.updateOfflineStoryStatus(n.tempId,"failed")}return!0}catch(t){return console.error("Failed to sync offline stories:",t),!1}}async getPendingOfflineStories(){await this.init();try{const o=this.dbUtil.db.transaction("offlineStories","readonly").objectStore("offlineStories").index("status").getAll("pending");return new Promise((s,i)=>{o.onerror=()=>i(new Error("Failed to get pending offline stories")),o.onsuccess=()=>s(o.result)})}catch(t){throw console.error("Failed to get pending offline stories:",t),t}}async simulateApiUpload(t){return new Promise(r=>{setTimeout(()=>{const n=Math.random()>.2;r(n?{success:!0,id:`server-${Date.now()}`,story:{...t,id:`server-${Date.now()}`,isOffline:!1}}:{success:!1,error:"Simulasi kegagalan API"})},1e3)})}async deleteOfflineStory(t){await this.init();try{return await this.dbUtil.deleteData("offlineStories",t),!0}catch(r){throw console.error(`Failed to delete offline story with tempId ${t}:`,r),r}}async saveFavoriteStory(t){await this.init();try{return await this.dbUtil.saveData("favorites",{...t,addedToFavoritesAt:new Date().toISOString()}),!0}catch(r){throw console.error("Failed to save favorite story:",r),r}}async removeFavoriteStory(t){await this.init();try{return await this.dbUtil.deleteData("favorites",t),!0}catch(r){throw console.error(`Failed to remove favorite story with id ${t}:`,r),r}}async getFavoriteStories(){await this.init();try{return(await this.dbUtil.getAllData("favorites")).sort((r,n)=>new Date(n.addedToFavoritesAt)-new Date(r.addedToFavoritesAt))}catch(t){throw console.error("Failed to get favorite stories:",t),t}}async isStoryFavorite(t){await this.init();try{return!!await this.dbUtil.getData("favorites",t)}catch(r){throw console.error(`Failed to check if story with id ${t} is favorite:`,r),r}}async clearAllStories(){await this.init();try{return await this.dbUtil.clearStore("stories"),!0}catch(t){throw console.error("Failed to clear all stories:",t),t}}}const Hr=Object.freeze(Object.defineProperty({__proto__:null,StoryDatabase:yt},Symbol.toStringTag,{value:"Module"}));class Mr extends HTMLElement{constructor(){super(),this.storyId="",this.story=null,this.isFavorite=!1,this.storyDatabase=new yt,this.attachShadow({mode:"open"})}static get observedAttributes(){return["story-id","story-data"]}async attributeChangedCallback(t,r,n){if(t==="story-id"&&n!==r&&(this.storyId=n,await this.checkFavoriteStatus()),t==="story-data"&&n!==r)try{this.story=JSON.parse(n)}catch(o){console.error("Invalid story data:",o)}}connectedCallback(){this.render(),this.attachEventListeners()}async checkFavoriteStatus(){try{await this.storyDatabase.init(),this.isFavorite=await this.storyDatabase.isStoryFavorite(this.storyId),this.updateButtonState()}catch(t){console.error("Error checking favorite status:",t)}}updateButtonState(){const t=this.shadowRoot.querySelector("#favorite-button"),r=this.shadowRoot.querySelector("#button-label");!t||!r||(this.isFavorite?(t.innerHTML='<i class="fas fa-heart"></i><span id="button-label">Hapus dari favorit</span>',t.classList.add("favorited"),t.setAttribute("aria-label","Hapus dari favorit"),t.title="Hapus dari favorit"):(t.innerHTML='<i class="far fa-heart"></i><span id="button-label">Tambahkan ke favorit</span>',t.classList.remove("favorited"),t.setAttribute("aria-label","Tambahkan ke favorit"),t.title="Tambahkan ke favorit"))}attachEventListeners(){const t=this.shadowRoot.querySelector("#favorite-button");t&&t.addEventListener("click",async r=>{if(r.stopPropagation(),!this.storyId||!this.story){console.error("Story ID or data is missing");return}try{this.isFavorite?(await this.storyDatabase.removeFavoriteStory(this.storyId),this.showNotification("Dihapus dari favorit","Cerita telah dihapus dari favorit")):(await this.storyDatabase.saveFavoriteStory(this.story),this.showNotification("Ditambahkan ke favorit","Cerita telah ditambahkan ke favorit")),this.isFavorite=!this.isFavorite,this.updateButtonState(),this.dispatchEvent(new CustomEvent("favorite-changed",{bubbles:!0,detail:{storyId:this.storyId,isFavorite:this.isFavorite}}))}catch(n){console.error("Error toggling favorite status:",n),this.showNotification("Gagal","Tidak dapat mengubah status favorit")}})}showNotification(t,r){const n=this.shadowRoot.querySelector("#notification");n&&(n.innerHTML=`
      <div class="notification-title">${t}</div>
      <div class="notification-body">${r}</div>
    `,n.classList.add("show"),setTimeout(()=>{n.classList.remove("show")},3e3))}render(){this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: inline-block;
          width: 100%;
        }
        
        .favorite-container {
          display: flex;
          align-items: center;
          width: 100%;
        }
        
        #favorite-button {
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: #f1f1f1;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 1rem;
          font-weight: bold;
          color: #7f8c8d;
          transition: transform 0.3s, color 0.3s, background-color 0.3s;
          padding: 10px 16px;
          width: 100%;
          min-height: 42px;
          text-align: center;
          margin: 5px 0;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        #favorite-button:hover {
          transform: scale(1.05);
          background-color: #e0e0e0;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
        
        #favorite-button.favorited {
          color: white;
          background-color: #e74c3c;
        }
        
        #favorite-button.favorited:hover {
          background-color: #c0392b;
        }
        
        #favorite-button i {
          margin-right: 8px;
          font-size: 1.1rem;
        }
        
        #button-label {
          display: inline-block;
          font-size: 0.95rem;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          max-width: calc(100% - 30px);
        }
        
        #notification {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background-color: #2ecc71;
          color: white;
          padding: 15px;
          border-radius: 5px;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
          transform: translateY(100px);
          opacity: 0;
          transition: transform 0.3s, opacity 0.3s;
          z-index: 1000;
        }
        
        #notification.show {
          transform: translateY(0);
          opacity: 1;
        }
        
        .notification-title {
          font-weight: bold;
          margin-bottom: 5px;
        }

        @media (min-width: 768px) {
          #favorite-button {
            min-width: 180px;
          }
          
          #button-label {
            font-size: 1rem;
          }
        }
      </style>
      
      <div class="favorite-container">
        <button id="favorite-button" aria-label="Tambahkan ke favorit" title="Tambahkan ke favorit">
          <i class="far fa-heart"></i>
          <span id="button-label">Tambahkan ke favorit</span>
        </button>
      </div>
      
      <div id="notification"></div>
    `}}customElements.define("favorite-button",Mr);const jr="modulepreload",$r=function(e,t){return new URL(e,t).href},Nt={},v=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){let i=function(l){return Promise.all(l.map(f=>Promise.resolve(f).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};const a=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));o=i(r.map(l=>{if(l=$r(l,n),l in Nt)return;Nt[l]=!0;const f=l.endsWith(".css"),w=f?'[rel="stylesheet"]':"";if(!!n)for(let m=a.length-1;m>=0;m--){const p=a[m];if(p.href===l&&(!f||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${w}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":jr,f||(h.as="script"),h.crossOrigin="",h.href=l,u&&h.setAttribute("nonce",u),document.head.appendChild(h),f)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};class Vr{constructor(){this.routes={"/":this.createStoryPresenter.bind(this),"/stories":this.createStoryPresenter.bind(this),"/stories/:id":this.createStoryDetailPresenter.bind(this),"/add-story":this.createAddStoryPresenter.bind(this),"/favorites":this.createFavoriteStoriesPresenter.bind(this),"/login":this.createAuthPresenter.bind(this),"/register":this.createAuthPresenter.bind(this),"/404":this.createNotFoundPresenter.bind(this)},this.modes={"/login":"login","/register":"register"},this.setupViewTransitions()}async createStoryPresenter(){const{StoryView:t}=await v(async()=>{const{StoryView:i}=await import("./StoryView-DmSkCwTH.js");return{StoryView:i}},__vite__mapDeps([0,1,2,3]),import.meta.url),{StoryModel:r}=await v(async()=>{const{StoryModel:i}=await import("./StoryModel-Df3_wHQs.js");return{StoryModel:i}},[],import.meta.url),n=new t,o=new r,{StoryPresenter:s}=await v(async()=>{const{StoryPresenter:i}=await import("./StoryPresenter-DThdOYRT.js");return{StoryPresenter:i}},[],import.meta.url);return new s(n,o)}async createStoryDetailPresenter(t){const{StoryDetailView:r}=await v(async()=>{const{StoryDetailView:a}=await import("./StoryDetailView-EIgCoTu9.js");return{StoryDetailView:a}},__vite__mapDeps([4,2,3]),import.meta.url),{StoryModel:n}=await v(async()=>{const{StoryModel:a}=await import("./StoryModel-Df3_wHQs.js");return{StoryModel:a}},[],import.meta.url),o=new r,s=new n,{StoryDetailPresenter:i}=await v(async()=>{const{StoryDetailPresenter:a}=await import("./StoryDetailPresenter-DzWiKQaB.js");return{StoryDetailPresenter:a}},[],import.meta.url);return new i(o,s,t)}async createAddStoryPresenter(){const{AddStoryView:t}=await v(async()=>{const{AddStoryView:i}=await import("./AddStoryView-DA8UNSQF.js");return{AddStoryView:i}},__vite__mapDeps([5,2,3,1]),import.meta.url),{StoryData:r}=await v(async()=>{const{StoryData:i}=await import("./StoryData-MCobvD7n.js");return{StoryData:i}},[],import.meta.url),n=new t,o=new r,{AddStoryPresenter:s}=await v(async()=>{const{AddStoryPresenter:i}=await import("./AddStoryPresenter-BGhHYA1U.js");return{AddStoryPresenter:i}},[],import.meta.url);return new s(n,o)}async createFavoriteStoriesPresenter(){const{FavoriteStoriesView:t}=await v(async()=>{const{FavoriteStoriesView:i}=await import("./FavoriteStoriesView-47aNNSOt.js");return{FavoriteStoriesView:i}},__vite__mapDeps([6,2,3]),import.meta.url),{StoryDatabase:r}=await v(async()=>{const{StoryDatabase:i}=await Promise.resolve().then(()=>Hr);return{StoryDatabase:i}},void 0,import.meta.url),n=new t,o=new r,{FavoriteStoriesPresenter:s}=await v(async()=>{const{FavoriteStoriesPresenter:i}=await import("./FavoriteStoriesPresenter-CRXuONZL.js");return{FavoriteStoriesPresenter:i}},[],import.meta.url);return new s(n,o)}async createAuthPresenter(t){const{AuthView:r}=await v(async()=>{const{AuthView:a}=await import("./AuthView-DMCRc2Zj.js");return{AuthView:a}},__vite__mapDeps([7,8]),import.meta.url),{UserAuth:n}=await v(async()=>{const{UserAuth:a}=await import("./UserAuth-Cx9apivQ.js");return{UserAuth:a}},[],import.meta.url),o=new r,s=new n,{AuthPresenter:i}=await v(async()=>{const{AuthPresenter:a}=await import("./AuthPresenter-DsHbXpFP.js");return{AuthPresenter:a}},[],import.meta.url);return new i(o,s,t)}async createNotFoundPresenter(){const{NotFoundView:t}=await v(async()=>{const{NotFoundView:n}=await import("./NotFoundView-D71-YYx1.js");return{NotFoundView:n}},[],import.meta.url),r=new t;return{view:r,render:()=>r.render(),init:()=>r.init()}}setupViewTransitions(){if(!document.startViewTransition){this.transition=t=>t();return}this.originalHandleRoute=this.handleRoute.bind(this),this.handleRoute=async()=>{document.startViewTransition(()=>{this.originalHandleRoute()})}}init(){window.addEventListener("hashchange",this.handleRoute.bind(this)),this.handleRoute()}async handleRoute(){try{const{UserSession:t}=await v(async()=>{const{UserSession:l}=await Promise.resolve().then(()=>ae);return{UserSession:l}},void 0,import.meta.url),{NotificationService:r}=await v(async()=>{const{NotificationService:l}=await import("./NotificationService-CC43zISv.js").then(f=>f.a);return{NotificationService:l}},[],import.meta.url),n=window.location.hash.slice(1)||"/";let o="/",s=null;if(n!=="/"){const l=n.split("/").filter(Boolean);if(l.length>0){const f=l[0];s=l[1]||null,o=s?`/${f}/:id`:`/${f}`}}if(o!=="/login"&&o!=="/register"&&o!=="/404"&&!t.isAuthenticated()){r.showError("Please login to access this page"),window.location.hash="/login";return}if((o==="/login"||o==="/register")&&t.isAuthenticated()){r.showSuccess("You are already logged in"),window.location.hash="/";return}const i=this.routes[o];if(!i){window.location.hash="/404";return}const a=this.modes[o],d=document.getElementById("app");if(!d)return;const u=s?await i(s):a?await i(a):await i();u.render&&(d.innerHTML=u.render()),u.init&&await u.init()}catch(t){console.error("Routing error:",t);const r=document.getElementById("app");r&&(r.innerHTML=`
          <div class="error-state">
            <h1>Error Loading Page</h1>
            <p>${t.message||"Failed to load the requested page."}</p>
            <a href="#/" class="button">Back to Home</a>
          </div>
        `);const{NotificationService:n}=await v(async()=>{const{NotificationService:o}=await import("./NotificationService-CC43zISv.js").then(s=>s.a);return{NotificationService:o}},[],import.meta.url);n.showError("Failed to load page")}}navigateTo(t){document.startViewTransition?document.startViewTransition(()=>{window.location.hash=t}):window.location.hash=t}}class zr{constructor(){this.router=new Vr,this.initNavigation(),this.setupDOMObserver()}initNavigation(){setTimeout(()=>this.updateNav(),100),window.addEventListener("hashchange",()=>{console.log("Hash changed, updating navigation"),this.updateNav()}),document.addEventListener("click",t=>{t.target&&(t.target.id==="logout-button"||t.target.parentElement&&t.target.parentElement.id==="logout-button")&&(t.preventDefault(),console.log("Logout button clicked"),O.logout(),console.log("User logged out, auth status:",O.isAuthenticated()),this.updateNav(),this.router.navigateTo("/login"))})}setupDOMObserver(){new MutationObserver(r=>{r.some(o=>Array.from(o.addedNodes).some(s=>s.nodeType===1&&(s.hasAttribute("data-auth")||s.querySelector("[data-auth]")||s.id==="logout-button")))&&(console.log("DOM changed, updating navigation"),this.updateNav())}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-auth","data-unauth","id"]})}updateNav(){const t=document.querySelectorAll("[data-auth]"),r=document.querySelectorAll("[data-unauth]"),n=document.getElementById("logout-button");if(console.log("Updating nav, auth status:",O.isAuthenticated()),console.log("Auth elements count:",t.length),console.log("Unauth elements count:",r.length),console.log("Logout button found:",!!n),O.isAuthenticated()){console.log("User is authenticated, showing auth elements"),t.forEach(s=>{s.style.display="",console.log("Showing auth element:",s.tagName,s.className||s.id)}),r.forEach(s=>{s.style.display="none",console.log("Hiding unauth element:",s.tagName,s.className||s.id)});const o=O.getUserName();console.log("User name:",o),document.querySelectorAll("[data-username]").forEach(s=>{s.textContent=o||"Profile"}),n?(n.style.display="",console.log("Explicitly showing logout button")):console.warn("Logout button not found in DOM")}else console.log("User is not authenticated, hiding auth elements"),t.forEach(o=>{o.style.display="none",console.log("Hiding auth element:",o.tagName,o.className||o.id)}),r.forEach(o=>{o.style.display="",console.log("Showing unauth element:",o.tagName,o.className||o.id)}),n&&(n.style.display="none",console.log("Explicitly hiding logout button"))}start(){this.router.init(),setTimeout(()=>this.updateNav(),500)}}const Wr=async()=>{if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});return console.log("ServiceWorker registration successful with scope:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;console.log("Service Worker update found!"),t.addEventListener("statechange",()=>{console.log("Service Worker state changed:",t.state),t.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New content is available; please refresh."),Jr())})}),e}catch(e){throw console.error("Service worker registration failed:",e),new Error(`Service worker registration failed: ${e}`)}else throw console.warn("Service workers are not supported in this browser"),new Error("Service workers are not supported in this browser")};function Jr(){let e=document.getElementById("sw-refresh-notification");e||(e=document.createElement("div"),e.id="sw-refresh-notification",e.style.position="fixed",e.style.bottom="20px",e.style.left="50%",e.style.transform="translateX(-50%)",e.style.backgroundColor="#3498db",e.style.color="white",e.style.padding="15px 20px",e.style.borderRadius="5px",e.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.1)",e.style.zIndex="1000",e.style.textAlign="center",e.innerHTML=`
      <p>Versi baru tersedia!</p>
      <button id="reload-button" style="background-color: white; color: #3498db; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-top: 10px;">
        Refresh
      </button>
    `,document.body.appendChild(e),document.getElementById("reload-button").addEventListener("click",()=>{window.location.reload()}))}const ne=async(e="sync-stories")=>{if(!("serviceWorker"in navigator)||!("SyncManager"in window))throw new Error("Background sync is not supported in this browser");try{return await(await navigator.serviceWorker.ready).sync.register(e),console.log(`Background sync registered: ${e}`),!0}catch(t){throw console.error("Background sync registration failed:",t),new Error(`Background sync registration failed: ${t}`)}},Kr=e=>{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",t=>{e&&typeof e=="function"&&e(t.data)})},Xr=async()=>{try{const e=new yt;return await e.init(),console.log("Database initialized successfully"),e}catch(e){return console.error("Failed to initialize database:",e),null}};function Gr(){if(!document.startViewTransition)return t=>t();const e=history.pushState;return history.pushState=function(){document.startViewTransition(()=>{e.apply(this,arguments)})},t=>document.startViewTransition(t)}const Yr=async()=>{try{"Notification"in window?await X.requestPermission()==="granted"?(console.log("Notification permission granted"),await X.subscribe()):console.log("Notification permission denied"):console.log("Notifications not supported in this browser")}catch(e){console.error("Error requesting notification permission:",e)}},Qr=()=>{O.getToken()||(console.log("No auth token found, setting dummy token for development"),O.login("dummy_dev_token","Dev User")),console.log("Auth status:",O.isAuthenticated()),console.log("Username:",O.getUserName())},Zr=async e=>{e&&Kr(async t=>{if(console.log("Received message from Service Worker:",t),t&&t.type==="SYNC_STORIES")try{console.log("Syncing offline stories..."),await e.syncOfflineStories()&&ft("Sinkronisasi berhasil","Cerita yang dibuat saat offline telah disimpan.")}catch(r){console.error("Error syncing offline stories:",r),ft("Sinkronisasi gagal","Gagal menyimpan cerita yang dibuat saat offline.")}})},ft=(e,t)=>{let r=document.getElementById("sync-notification");r||(r=document.createElement("div"),r.id="sync-notification",r.style.position="fixed",r.style.bottom="20px",r.style.left="50%",r.style.transform="translateX(-50%) translateY(100px)",r.style.backgroundColor="#2ecc71",r.style.color="white",r.style.padding="15px 20px",r.style.borderRadius="5px",r.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.1)",r.style.zIndex="1000",r.style.opacity="0",r.style.transition="transform 0.3s, opacity 0.3s",document.body.appendChild(r)),r.innerHTML=`
    <div style="font-weight: bold; margin-bottom: 5px;">${e}</div>
    <div>${t}</div>
  `,setTimeout(()=>{r.style.opacity="1",r.style.transform="translateX(-50%) translateY(0)"},10),setTimeout(()=>{r.style.opacity="0",r.style.transform="translateX(-50%) translateY(100px)"},4e3)},tn=()=>{window.addEventListener("online",()=>{console.log("Device is online"),document.body.classList.remove("offline"),"serviceWorker"in navigator&&"SyncManager"in window&&ne("sync-stories").catch(e=>console.error("Failed to register background sync when back online:",e))}),window.addEventListener("offline",()=>{console.log("Device is offline"),document.body.classList.add("offline"),ft("Mode Offline","Anda sedang offline. Perubahan akan disimpan lokal dan disinkronkan saat online.")}),navigator.onLine||document.body.classList.add("offline")};document.addEventListener("DOMContentLoaded",async()=>{Qr();const e=Gr();tn();const t=await Xr();e(async()=>{try{const n=await Wr();if(console.log("ServiceWorker registered:",n.scope),await Zr(t),await Yr(),"SyncManager"in window)try{await ne("sync-stories")}catch(o){console.error("Background sync registration failed:",o)}else console.log("Background sync not supported in this browser")}catch(n){console.error("ServiceWorker registration failed:",n)}new zr().start()})});export{se as A,X as N,yt as S,O as U,b as a};
